<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pedido Bio-Fix</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 15px; background: #f4f4f4; }
    h2 { text-align: center; }
    .section { background: #fff; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
    .item { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; }
    select, input { padding: 5px; flex: 1; }
    button { background: #25d366; color: #fff; border: none; padding: 10px; border-radius: 8px; cursor: pointer; }
    button:hover { background: #1ebe5c; }
  </style>
</head>
<body>
  <h2>Formulario de Pedido</h2>

  <!-- DATOS DEL CLIENTE -->
  <div class="section">
    <h3>Datos del odontólogo</h3>
    <input type="text" placeholder="Nombre" id="nombre"><br><br>
    <input type="text" placeholder="Apellido" id="apellido"><br><br>
    <input type="text" placeholder="DNI" id="dni"><br><br>
    <input type="text" placeholder="Matrícula profesional" id="matricula"><br><br>
    <select id="provincia">
      <option value="">Seleccionar provincia</option>
      <option>Buenos Aires</option>
      <option>Córdoba</option>
      <option>Santa Fe</option>
      <option>Mendoza</option>
      <option>Entre Ríos</option>
    </select><br><br>
    <input type="text" placeholder="Localidad" id="localidad">
  </div>

  <!-- SECCIÓN IMPLANTES -->
  <div class="section">
    <h3>Implantes</h3>
    <div id="implantes-list"></div>
    <button type="button" onclick="agregarImplante()">+ Agregar Implante</button>
  </div>

  <!-- BOTÓN ENVIAR -->
  <button onclick="enviarPedido()">Enviar por WhatsApp</button>

  <script>
    // Opciones de sistemas y medidas
    const sistemas = {
      "Hexágono Interno": ["Ø3.0 x 6.5 mm", "Ø3.0 x 8 mm", "Ø3.0 x10 mm", "Ø3.0 x 11.5 mm", "Ø3.0 x 13 mm", "Ø3.0 x 16 mm", "Ø3.75 x 6.5 mm", "Ø3.75 x 8 mm", "Ø3.75 x 10 mm", "Ø3.75 x 10 mm", "Ø3.75 x 11.5 mm", "Ø3.75 x 13 mm", "Ø3.75 x 16 mm", "Ø4.2 x 6.5 mm", "Ø4.2 x 8mm", "Ø4.2 x 10mm", "Ø4.2 x 11.5mm", "Ø4.2 x 13mm", "Ø4.2 x 13mm", "Ø4.2 x 16mm", "Ø5.0 x 6.5mm", "Ø5.0 x 8mm", "Ø5.0 x 10mm", "Ø5.0 x 11.5mm", "Ø5.0 x 13mm", "Ø5.0 x 16mm"],
      "Hexágono Externo": ["Ø3.75 x 8.5 mm", "Ø4.0 x 10 mm", "Ø5.0 x 13 mm"],
      "Cono Morse": ["Ø3.5 x 11.5 mm", "Ø4.0 x 13 mm"],
      "Monopieza": ["Ø3.0 x 10 mm", "Ø3.5 x 13 mm"],
      "Monopieza Basal": ["Ø3.5 x 10 mm", "Ø4.0 x 12 mm"],
      "Compresivo Multiunit": ["Ø3.75 x 10 mm", "Ø4.0 x 13 mm"],
      "Minipilares": ["Corto", "Mediano", "Largo"]
    };

    // Agregar implante al formulario
    function agregarImplante() {
      const div = document.createElement("div");
      div.classList.add("item");

      const selectSistema = document.createElement("select");
      selectSistema.innerHTML = "<option value=''>Sistema</option>";
      for (let s in sistemas) {
        selectSistema.innerHTML += `<option value="${s}">${s}</option>`;
      }

      const selectMedida = document.createElement("select");
      selectMedida.innerHTML = "<option value=''>Medida</option>";

      // Cuando cambia el sistema, carga las medidas
      selectSistema.addEventListener("change", () => {
        selectMedida.innerHTML = "<option value=''>Medida</option>";
        sistemas[selectSistema.value].forEach(m => {
          selectMedida.innerHTML += `<option value="${m}">${m}</option>`;
        });
      });

      const inputCantidad = document.createElement("input");
      inputCantidad.type = "number";
      inputCantidad.placeholder = "Cantidad";
      inputCantidad.min = 1;

      div.appendChild(selectSistema);
      div.appendChild(selectMedida);
      div.appendChild(inputCantidad);

      document.getElementById("implantes-list").appendChild(div);
    }

    // Enviar pedido por WhatsApp
    function enviarPedido() {
      const nombre = document.getElementById("nombre").value;
      const apellido = document.getElementById("apellido").value;
      const dni = document.getElementById("dni").value;
      const matricula = document.getElementById("matricula").value;
      const provincia = document.getElementById("provincia").value;
      const localidad = document.getElementById("localidad").value;

      // Mensaje base
      let mensaje = `🆕 Nuevo Pedido Bio-Fix\n`;
      mensaje += `👤 Nombre: ${nombre} ${apellido}\n`;
      mensaje += `🪪 DNI: ${dni}\n`;
      mensaje += `📄 Matrícula: ${matricula}\n`;
      mensaje += `📍 Provincia: ${provincia}, Localidad: ${localidad}\n`;
      mensaje += "--------------------\n";

      // Implantes seleccionados
      document.querySelectorAll("#implantes-list .item").forEach(item => {
        const sistema = item.querySelector("select:nth-child(1)").value;
        const medida = item.querySelector("select:nth-child(2)").value;
        const cantidad = item.querySelector("input").value;
        if (sistema && medida && cantidad) {
          mensaje += `🦷 Implantes ${sistema}: ${medida} x${cantidad}\n`;
        }
      });

      // Números de vendedores
      const vendedores = ["5491123456789", "549351234567"]; // 👉 cambiar por los números reales

      // Armar link con encodeURIComponent
      const link = `https://wa.me/${vendedores[0]}?text=${encodeURIComponent(mensaje)}`;
      window.open(link, "_blank");
    }
  </script>
</body>
</html>
